var gameprice=webpackJsonp_name_([0],{0:function(e,r,t){e.exports=t(1)},1:function(e,r,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e){return function(){var r=e.apply(this,arguments);return new Promise(function(e,t){function n(o,a){try{var i=r[o](a),u=i.value}catch(s){return void t(s)}return i.done?void e(u):Promise.resolve(u).then(function(e){return n("next",e)},function(e){return n("throw",e)})}return n("next")})}}function a(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function i(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}function u(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}var s=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),c=t(2),l=n(c),d=t(3),y=n(d),f=t(301),h=n(f),p=t(302),m=n(p),b=t(303),C=n(b),_=t(305),v=n(_),g=function(e){function r(){return a(this,r),i(this,Object.getPrototypeOf(r).apply(this,arguments))}return u(r,e),s(r,[{key:"onLoad",value:function(){function e(){return r.apply(this,arguments)}var r=o(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,C["default"].get(["currency_code","show_current_price","show_historical_price","show_regional_price","regional_countries"]);case 2:e=r.sent,(e.show_current_price||e.show_historical_price)&&this.getPrices(e),e.show_regional_price&&this.getRegionalPrice(e.regional_countries);case 5:case"end":return r.stop()}},t,this)}));return e}()},{key:"getPrices",value:function(){function e(e){return r.apply(this,arguments)}var r=o(regeneratorRuntime.mark(function t(e){var r,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=[],(0,l["default"])("input[name=subid]").each(function(e,t){t.value&&r.push("sub/"+t.value)}),(0,l["default"])("input[name=appid]").each(function(e,t){t.value&&r.push("app/"+t.value)}),(0,l["default"])("input[name=bundleid]").each(function(e,t){t.value&&r.push("bundle/"+t.value)}),r.length){t.next=6;break}return t.abrupt("return");case 6:return t.next=8,h["default"].sendRequest({method:"GET",url:f.MAIN_API_URL+"/prices",data:{cc:h["default"].getStoreRegionCountryCode(),app:r.join()}});case 8:n=t.sent,n.success&&!function(){var r=n[".meta"].currency,t=/(\w+)\/(\d+)/;l["default"].each(n.data,function(n,o){var a=n.match(t);if(a){var i=a[1],u=a[2],s=(0,l["default"])("input[name="+i+"id][value="+u+"]").parent().parent();(0,l["default"])(s).find(".game_purchase_action").before('\n            <div class="sih_store_prices">\n              <div class="sih_lowest_price"></div>\n              <div class="sih_current_price"></div>\n            </div>\n          ');var c=m["default"].parsePrice(s.find(".price, .discount_final_price").text());if(e.show_historical_price&&o.lowest){var d="Lowest price of all time: __price__ at __shop__ on __date__ (__info__)",y='<a href="'+o.urls.history+'" target="_blank">info</a>',f='<span class="sih_price">'+m["default"].vCurrencyFormat(100*o.lowest.price,r.code)+"</span>";(0,l["default"])(s).find(".sih_lowest_price").append(""+d.replace("__price__",f).replace("__shop__",o.lowest.shop).replace("__date__",new Date(1e3*o.lowest.added).toLocaleDateString()).replace("__info__",y))}else(0,l["default"])(s).find(".sih_lowest_price").remove();if(e.show_current_price&&o.current){var h="Actual lowest price: __price__ at __shop__ (__info__)",p='<a href="'+o.current.url+'" target="_blank">'+o.current.shop+"</a>",b='<a href="'+o.urls.game+'" target="_blank">info</a>',C="";if("Steam"!==o.current.shop&&c.value>100*o.current.price_new){var _=m["default"].vCurrencyFormat(c.value-100*o.current.price_new,r.code);C='<span class="sih_your_savings">Your savings: '+_+"</span>"}var v='<span class="'+(C?"sih_your_savings":"sih_price")+'">'+m["default"].vCurrencyFormat(100*o.current.price_new,r.code)+"</span>";(0,l["default"])(s).find(".sih_current_price").append(h.replace("__price__",v).replace("__shop__",p).replace("__info__",b)+"\n              "+C+"\n              </div>")}else(0,l["default"])(s).find(".sih_current_price").remove();(0,l["default"])(s).find(".sih_lowest_price, .sih_current_price").length||(0,l["default"])(s).find(".sih_store_prices").remove()}})}();case 10:case"end":return t.stop()}},t,this)}));return e}()},{key:"getRegionalPrice",value:function(){function e(e){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function n(e){var t,o,a,i,u;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=[],o={},(0,l["default"])("input[name=subid]").each(function(e,r){r.value&&t.push(r.value)}),a=h["default"].getStoreRegionCountryCode().toLowerCase(),n.next=6,Promise.all(t.map(function(t){return r.getAllRegionalGamePrices(t,e)}));case 6:return i=n.sent,i.forEach(function(e){return l["default"].extend(o,e)}),n.next=10,h["default"].getWalletCurrency();case 10:return u=n.sent,n.next=13,v["default"].load(u);case 13:l["default"].each(t,function(r,t){var n=(0,l["default"])("input[name=subid][value="+t+"]").parent().parent().parent();n.prepend('<div class="sih_regional_price" />');var i=m["default"].parsePrice(n.find(".price, .discount_final_price").text());l["default"].each(e,function(e,r){var s=o[t][r];if(r!==a&&s){var c=void 0;c=s.currency!==i.currencyCode?v["default"].convert(s["final"],s.currency,i.currencyCode):s["final"];var d=c-i.value,y=d>0?"sih_price_higher":"sih_price_lower",f=chrome.extension.getURL("assets/blank.gif"),h=(0,l["default"])('\n            <div class="sih_region" >\n              <span class="sih_flag">\n                <img src="'+f+'" class="flag flag-'+r+'" title="'+r.toUpperCase()+'">'+m["default"].vCurrencyFormat(s["final"],s.currency)+'\n              </span>\n              <span class="sih_regional_price_converted '+y+'">'+m["default"].vCurrencyFormat(c,u)+'</span>\n              <div class="sih_regional_price_saving">\n                '+m["default"].vCurrencyFormat(d,u)+'<span class="'+(d>0?"arrow_up":"arrow_down")+'"></span>\n              </div>\n            </div>\n          ');n.addClass("sih_game_node"),n.find(".sih_regional_price").append(h)}}),n.find(".sih_region").length?n.find("h1").prepend('<span class="sih_globe" />'):n.find(".sih_regional_price").remove()});case 14:case"end":return n.stop()}},n,this)}));return e}()}],[{key:"getAllRegionalGamePrices",value:function(){function e(e,r){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function n(e,t){var o,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return o={},n.next=3,Promise.all(t.map(function(t){return r.getGamePriceByRegion(e,t)}));case 3:return a=n.sent,a.forEach(function(e){return l["default"].extend(!0,o,e)}),n.abrupt("return",o);case 6:case"end":return n.stop()}},n,this)}));return e}()},{key:"getGamePriceByRegion",value:function(){function e(e,t){return r.apply(this,arguments)}var r=o(regeneratorRuntime.mark(function t(e,r){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h["default"].sendRequest({method:"GET",url:"//store.steampowered.com/api/packagedetails/",data:{cc:r,packageids:e}});case 2:return n=t.sent,n[e].success?(n[e][r]=n[e].data.price,delete n[e].data):n[e][r]=null,delete n[e].success,t.abrupt("return",n);case 6:case"end":return t.stop()}},t,this)}));return e}()}]),r}(y["default"]);new g},301:function(e,r,t){(function(e){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e){return function(){var r=e.apply(this,arguments);return new Promise(function(e,t){function n(o,a){try{var i=r[o](a),u=i.value}catch(s){return void t(s)}return i.done?void e(u):Promise.resolve(u).then(function(e){return n("next",e)},function(e){return n("throw",e)})}return n("next")})}}function a(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0}),r.runInPageContext=r.MAIN_API_URL=void 0;var i=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),u=t(2),s=n(u);e._babelPolyfill||t(4);var c=(r.MAIN_API_URL="cmeakgjggjdlcpncigglobpjbkabhmjl"===window.chrome.runtime.id?"http://steaminventoryhelper.org/api/sih":"http://loc.steaminventoryhelper.org/api/sih",r.runInPageContext=function(e){var r=document.createElement("script");r.textContent="("+e+")();",document.documentElement.appendChild(r),r.parentNode.removeChild(r)},function(){function e(){a(this,e)}return i(e,null,[{key:"sendRequest",value:function(){function e(e){return r.apply(this,arguments)}var r=o(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise(function(r,t){return s["default"].ajax(e).done(r).fail(t)}));case 1:case"end":return r.stop()}},t,this)}));return e}()},{key:"getStoreRegionCountryCode",value:function(){var e="us",r=document.cookie,t=r.match(/fakeCC=([a-z]{2})/i);return null!=t&&2===t.length?e=t[1]:(t=r.match(/steamCC(?:_\d+){4}=([a-z]{2})/i),null!=t&&2===t.length?e=t[1]:(t=r.match(/steamCountry=([a-z]{2})/i),null!=t&&2===t.length&&(e=t[1]))),e}},{key:"getAppId",value:function(e){return e&&e.match(/(?:store\.steampowered|steamcommunity)\.com\/app\/(\d+)\/?/)?RegExp.$1:null}},{key:"getWalletCurrency",value:function(){function r(){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function n(){var r,t;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.sendRequest({method:"GET",url:"//store.steampowered.com/steamaccount/addfunds",xhrFields:{withCredentials:!0}});case 2:return r=n.sent,t=(0,s["default"])(r).find("input[name=currency]").first().val(),n.abrupt("return",t||"USD");case 5:case"end":return n.stop()}},n,this)}));return r}()},{key:"getAvatarURLFromHash",value:function(e,r){var t="http://cdn.akamai.steamstatic.com/steamcommunity/public/images/avatars/"+e.substring(0,2)+"/"+e;return t+="full"===r?"_full.jpg":"medium"===r?"_medium.jpg":".jpg"}}]),e}());r["default"]=c}).call(r,function(){return this}())},302:function(e,r){"use strict";function t(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),o={RUB:{strCode:"RUB",eCurrencyCode:5,strSymbol:"pуб.",places:2,hideZeroth:!0,thousand:"",delimiter:",",bSymbolIsPrefix:!1,bWholeUnitsOnly:!0},EUR:{strCode:"EUR",eCurrencyCode:3,strSymbol:"€",places:2,hideZeroth:!1,thousand:" ",delimiter:",",bSymbolIsPrefix:!1,bWholeUnitsOnly:!1},GBP:{strCode:"GBP",eCurrencyCode:2,strSymbol:"£",places:2,hideZeroth:!1,thousand:",",delimiter:".",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1},BRL:{strCode:"BRL",eCurrencyCode:7,strSymbol:"R$",places:2,hideZeroth:!1,thousand:".",delimiter:",",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1},JPY:{strCode:"JPY",eCurrencyCode:8,strSymbol:"¥",places:0,hideZeroth:!1,thousand:",",delimiter:".",bSymbolIsPrefix:!0,bWholeUnitsOnly:!0},NOK:{strCode:"NOK",eCurrencyCode:9,strSymbol:"kr",places:2,hideZeroth:!1,thousand:".",delimiter:",",bSymbolIsPrefix:!1,bWholeUnitsOnly:!1},CHF:{strCode:"CHF",eCurrencyCode:4,strSymbol:"CHF",places:2,hideZeroth:!1,thousand:"'",delimiter:".",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1},IDR:{strCode:"IDR",eCurrencyCode:10,strSymbol:"Rp",places:0,hideZeroth:!1,thousand:" ",delimiter:".",bSymbolIsPrefix:!0,bWholeUnitsOnly:!0},MYR:{strCode:"MYR",eCurrencyCode:11,strSymbol:"RM",places:2,hideZeroth:!1,thousand:",",delimiter:".",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1},PHP:{strCode:"PHP",eCurrencyCode:12,strSymbol:"P",places:2,hideZeroth:!1,thousand:",",delimiter:".",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1},SGD:{strCode:"SGD",eCurrencyCode:13,strSymbol:"S$",places:2,hideZeroth:!1,thousand:",",delimiter:".",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1},THB:{strCode:"THB",eCurrencyCode:14,strSymbol:"฿",places:2,hideZeroth:!1,thousand:",",delimiter:".",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1},VND:{strCode:"VND",eCurrencyCode:15,strSymbol:"₫",places:2,hideZeroth:!1,thousand:",",delimiter:".",bSymbolIsPrefix:!0,bWholeUnitsOnly:!0},KRW:{strCode:"KRW",eCurrencyCode:16,strSymbol:"₩",places:2,hideZeroth:!1,thousand:",",delimiter:".",bSymbolIsPrefix:!0,bWholeUnitsOnly:!0},TRY:{strCode:"TRY",eCurrencyCode:17,strSymbol:"TL",places:2,hideZeroth:!1,thousand:"",delimiter:",",bSymbolIsPrefix:!1,bWholeUnitsOnly:!1},UAH:{strCode:"UAH",eCurrencyCode:18,strSymbol:"₴",places:2,hideZeroth:!1,thousand:"",delimiter:",",bSymbolIsPrefix:!1,bWholeUnitsOnly:!0},MXN:{strCode:"MXN",eCurrencyCode:19,strSymbol:"Mex$",places:2,hideZeroth:!1,thousand:",",delimiter:".",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1},CAD:{strCode:"CAD",eCurrencyCode:20,strSymbol:"CDN$",places:2,hideZeroth:!1,thousand:",",delimiter:".",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1},AUD:{strCode:"AUD",eCurrencyCode:21,strSymbol:"A$",places:2,hideZeroth:!1,thousand:",",delimiter:".",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1},NZD:{strCode:"NZD",eCurrencyCode:22,strSymbol:"NZ$",places:2,hideZeroth:!1,thousand:",",delimiter:".",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1},CNY:{strCode:"CNY",eCurrencyCode:23,strSymbol:"¥",places:2,hideZeroth:!1,thousand:",",delimiter:".",bSymbolIsPrefix:!0,bWholeUnitsOnly:!0},INR:{strCode:"INR",eCurrencyCode:24,strSymbol:"₹",places:2,hideZeroth:!1,thousand:",",delimiter:".",bSymbolIsPrefix:!0,bWholeUnitsOnly:!0},CLP:{strCode:"CLP",eCurrencyCode:25,strSymbol:"CLP$",places:2,hideZeroth:!0,thousand:".",delimiter:",",bSymbolIsPrefix:!0,bWholeUnitsOnly:!0},PEN:{strCode:"PEN",eCurrencyCode:26,strSymbol:"S/.",places:2,hideZeroth:!1,thousand:",",delimiter:".",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1},COP:{strCode:"COP",eCurrencyCode:27,strSymbol:"COL$",places:2,hideZeroth:!1,thousand:".",delimiter:",",bSymbolIsPrefix:!0,bWholeUnitsOnly:!0},ZAR:{strCode:"ZAR",eCurrencyCode:28,strSymbol:"R",places:2,hideZeroth:!1,thousand:",",delimiter:".",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1},HKD:{strCode:"HKD",eCurrencyCode:29,strSymbol:"HK$",places:2,hideZeroth:!1,thousand:",",delimiter:".",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1},TWD:{strCode:"TWD",eCurrencyCode:30,strSymbol:"NT$",places:2,hideZeroth:!1,thousand:",",delimiter:".",bSymbolIsPrefix:!0,bWholeUnitsOnly:!0},SAR:{strCode:"SAR",eCurrencyCode:31,strSymbol:"SR",places:2,hideZeroth:!1,thousand:"",delimiter:".",bSymbolIsPrefix:!1,bWholeUnitsOnly:!1},AED:{strCode:"AED",eCurrencyCode:32,strSymbol:"AED",places:2,hideZeroth:!1,thousand:"",delimiter:".",bSymbolIsPrefix:!1,bWholeUnitsOnly:!1},USD:{strCode:"USD",eCurrencyCode:1,strSymbol:"$",places:2,hideZeroth:!1,thousand:",",delimiter:".",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1},PLN:{strCode:"PLN",eCurrencyCode:6,strSymbol:"zł",places:2,hideZeroth:!1,thousand:".",delimiter:",",bSymbolIsPrefix:!1,bWholeUnitsOnly:!1},RMB:{strCode:"RMB",eCurrencyCode:9e3,strSymbol:"刀币",bSymbolIsPrefix:!1,bWholeUnitsOnly:!0},NXP:{strCode:"NXP",eCurrencyCode:9001,strSymbol:"원",bSymbolIsPrefix:!1,bWholeUnitsOnly:!0}},a=function(){function e(){t(this,e)}return n(e,null,[{key:"isCurrencySymbolBeforeValue",value:function(e){return o[e]&&o[e].bSymbolIsPrefix}},{key:"isCurrencyWholeUnits",value:function(e){return o[e]&&o[e].bWholeUnitsOnly&&"RUB"!==e}},{key:"getCurrencySymbolByCode",value:function(e){return o[e]?o[e].strSymbol:e+" "}},{key:"getCurrencySymbolFromString",value:function(e){var r=/(?:R\$|S\$|\$|RM|kr|Rp|€|¥|£|฿|pуб\.|P|₫|₩|TL|₴|Mex\$|CDN\$|A\$|HK\$|NT\$|₹|SR|R |DH|CHF|CLP\$|S\/\.|COL\$|NZ\$)/,t=e.match(r);return t?t[0]:""}},{key:"getCurrencyCodeFromDOM",value:function(){var e=document.querySelector('meta[itemprop="priceCurrency"]');return e&&e.hasAttribute("content")?e.getAttribute("content"):null}},{key:"getCurrencyCodeBySymbol",value:function(e){for(var r in o)if(o[r].strSymbol===e)return r;return""}},{key:"getCurrencyCodeById",value:function(e){for(var r in o)if(o[r].eCurrencyCode===e)return r;return"Unknown"}},{key:"parsePrice",value:function(r){var t=e.getCurrencySymbolFromString(r),n=e.getCurrencyCodeFromDOM()||e.getCurrencyCodeBySymbol(t),a=o[n],i=a.eCurrencyCode,u=parseFloat(r.replace(a.thousand,"").replace(a.delimiter,".").replace(/[^\d\.]/g,"").trim());return isNaN(u)?null:{value:100*u,currencyCode:n,currencySign:t,currencyNumber:i}}},{key:"vCurrencyFormat",value:function(r,t,n){var o=(r/100).toFixed(2);switch(t){case"EUR":return(""+o+e.getCurrencySymbolByCode(t)).replace(".",",").replace(",00",",--");case"GBP":return""+e.getCurrencySymbolByCode(t)+o;case"USD":return void 0!==n&&"US"!==n?""+e.getCurrencySymbolByCode(t)+o+" USD":""+e.getCurrencySymbolByCode(t)+o;case"RUB":return o.replace(".",",").replace(",00","")+" "+e.getCurrencySymbolByCode(t);case"JPY":return e.getCurrencySymbolByCode(t)+" "+o.replace(".00","");case"BRL":case"COP":return e.getCurrencySymbolByCode(t)+" "+o.replace(".",",");case"CLP":return e.getCurrencySymbolByCode(t)+" "+o.replace(".00","").replace(".",",");case"NOK":case"PLN":return o.replace(".",",")+" "+e.getCurrencySymbolByCode(t);case"SAR":case"AED":case"CHF":return o+" "+e.getCurrencySymbolByCode(t);case"IDR":return e.getCurrencySymbolByCode(t)+" "+o;case"MYR":case"PHP":case"SGD":case"THB":case"CNY":case"INR":case"ZAR":return""+e.getCurrencySymbolByCode(t)+o;case"KRW":case"VND":return""+e.getCurrencySymbolByCode(t)+o.replace(".00","");case"MXN":case"CAD":case"AUD":case"NZD":case"PEN":case"HKD":case"TWD":return e.getCurrencySymbolByCode(t)+" "+o;default:return o+" "+t}}},{key:"getCurrencyFormat",value:function(r,t){var n=o[t||e.getCurrencyCodeFromDOM()];n.hideZeroth&&r%1===0&&(n.places=0);var a=r<0?"-":"",i=""+parseInt(Math.abs(+r||0).toFixed(n.places),10),u=i.length>3?i.length%3:0,s=""+a+(u?i.substr(0,u)+n.thousand:"")+i.substr(u).replace(/(\d{3})(?=\d)/g,"$1"+n.thousand)+(n.places?n.delimiter+Math.abs(r-i).toFixed(n.places).slice(2):"");return n.left?n.sign+" "+s:s+" "+n.sign}}]),e}();r["default"]=a},305:function(e,r,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e){return function(){var r=e.apply(this,arguments);return new Promise(function(e,t){function n(o,a){try{var i=r[o](a),u=i.value}catch(s){return void t(s)}return i.done?void e(u):Promise.resolve(u).then(function(e){return n("next",e)},function(e){return n("throw",e)})}return n("next")})}}function a(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),u=t(301),s=n(u),c=t(303),l=n(c),d=l["default"].get("currency_rates").currency_rates||{},y=144e5,f=function(){function e(){a(this,e)}return i(e,null,[{key:"load",value:function(){function e(e){return r.apply(this,arguments)}var r=o(regeneratorRuntime.mark(function t(e){var r,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=6;break}return t.next=3,s["default"].getWalletCurrency();case 3:t.t0=t.sent,t.next=7;break;case 6:t.t0=e;case 7:if(r=t.t0,d[e]&&!(Date.now()-d[e].ts>y)){t.next=13;break}return t.next=11,s["default"].sendRequest({method:"GET",url:u.MAIN_API_URL+"/rates",data:{base:r}});case 11:n=t.sent,n.success&&(d[n.data.base]={rates:n.data.rates,ts:Date.now()},l["default"].set({currency_rates:d}));case 13:case"end":return t.stop()}},t,this)}));return e}()},{key:"convert",value:function(e,r,t){return d[t]?e/d[t].rates[r]:d[r]?e*d[r].rates[t]:null}}]),e}();r["default"]=f}});