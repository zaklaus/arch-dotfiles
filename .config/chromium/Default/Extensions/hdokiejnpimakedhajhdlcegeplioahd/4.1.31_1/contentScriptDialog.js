(function(){var d=Dialog,f=LPTools.getURLParams(),b=function(e,a){d.call(this,e,a);this.childDialogs=[];this.pendingAnimations=0};b.prototype=Object.create(Dialog.prototype);b.prototype.constructor=b;b.prototype.close=function(e){this.childDialogs.forEach(function(a){a.close(e)});var a=d.prototype.close.apply(this,arguments);a&&(0===d.prototype.getDialogCount()?csTop.LPFrame.close(f.dialogID):this.setFrameSize());this.data.modal&&csTop.LPFrame.hideModal();return a};b.prototype.setFrameSize=function(e){csTop.LPFrame.css({id:f.dialogID,
css:this.getSize(),callback:e&&e.callback})};b.prototype.addChildDialog=function(e){this.childDialogs.push(e);this.$element.append(e.$element)};b.prototype.getSize=function(){for(var e=$(".dialog:visible, .selectDropdownList:visible"),a=null,b=0;b<e.length;++b){var c;c=e[b];var d=c.getBoundingClientRect();c=$(c);c={top:d.top-parseInt(c.css("margin-top")),right:d.right+parseInt(c.css("margin-right")),bottom:d.bottom+parseInt(c.css("margin-bottom")),left:d.left-parseInt(c.css("margin-left"))};null===
a?a=c:(a.top=Math.min(a.top,c.top),a.right=Math.max(a.right,c.right),a.bottom=Math.max(a.bottom,c.bottom),a.left=Math.min(a.left,c.left))}return{"max-height":a?a.bottom-a.top:0,"max-width":a?a.right-a.left:0}};b.prototype.isOverlay=function(){return!1};b.prototype.requestAnimationFrame=function(b){var a=this,d=function(){++a.pendingAnimations;b(function(b){--a.pendingAnimations;0===a.pendingAnimations&&a.setFrameSize(b)})};0===this.pendingAnimations?csTop.LPFrame.css({id:f.dialogID,css:{"max-height":"none",
"max-width":"none"},callback:d}):d()};b.prototype.postSetup=function(){d.prototype.postSetup.apply(this,arguments);this.hide();csTop.LPFrame.css({id:f.dialogID,css:{display:"block"},callback:this.createHandler(function(){this.showInitial()})})};b.prototype.showInitial=function(){this.show();this.data.modal&&csTop.LPFrame.showModal();csTop.LPFrame.css({id:f.dialogID,css:this.getSize()})};b.prototype.addPasswordEye=function(b){b.LP_addPasswordEye({checkPermissionHandler:this.checkViewPasswordHandler,
includeGenerateButton:b.hasClass("generate"),textual:!0})};var g=$.extend({},Dialog.prototype);$.extend(Dialog.prototype,b.prototype);Dialog=b;d.prototype=g})();
