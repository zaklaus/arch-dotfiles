LPBackgroundRequester=function(e,c){c=c||{};var l=this,b=null,f=!1,g=[],d,m=c.interfaceDefinition,j=Date.now(),h=function(a){a.sourceFrameID=b;LPMessaging.makeRequest(d,a)},n=function(a){if(a.frameID===b)switch(a.type){case "backgroundResponse":case "contentScriptResponse":LPMessaging.handleResponse(a.data);break;case "contentScriptRequest":var k=a.sourceFrameID;LPMessaging.handleRequest(m,a.data,function(a){h({type:"contentScriptResponse",data:a,frameID:k})},{context:c.reflectionContext,additionalArguments:k})}else if("initialization"===
a.type&&(a=a.data,null===b&&a.request.initializationID===j)){"undefined"!==typeof Topics&&Topics.get(Topics.REQUEST_FRAMEWORK_INITIALIZED).publish(a,l);b=a.frameID;f=!1;d({type:"initialized",sourceFrameID:b});a=0;for(var e=g.length;a<e;++a)g[a]()}};this.initialize=function(a){null===b&&!f&&(d=e(n),d({type:"initialize",data:{initializationID:j,interfaceName:c.interfaceName,top:c.mainRequestFramework}}),f=!0);a&&g.push(a)};this.sendRequest=function(a){null===b?this.initialize(function(){h(a)}):h(a)}};
